# Cevher AtÃ¶lyesi Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BILGEE PLATFORM                                 â”‚
â”‚                    Educational Testing Application                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Cevher AtÃ¶lyesi     â”‚      â”‚  Other AI Features      â”‚
        â”‚  (Weakness Workshop)  â”‚      â”‚  (Coach, Strategy, etc) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â”‚ context:                      â”‚ context: (none)
                    â”‚ "cevher_atolyesi"            â”‚
                    â”‚                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           Firebase Functions (Cloud)                  â”‚
        â”‚              ai-generateGemini                        â”‚
        â”‚                                                       â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚         Model Router                        â”‚    â”‚
        â”‚  â”‚                                             â”‚    â”‚
        â”‚  â”‚  if (context === "cevher_atolyesi")        â”‚    â”‚
        â”‚  â”‚    â†’ Gemini 2.5 Flash                      â”‚    â”‚
        â”‚  â”‚  else                                       â”‚    â”‚
        â”‚  â”‚    â†’ Gemini 2.0 Flash Lite                 â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Gemini 2.5 Flash    â”‚  â”‚ Gemini 2.0 Flash Liteâ”‚
        â”‚  (Enhanced Model)    â”‚  â”‚  (Standard Model)     â”‚
        â”‚                      â”‚  â”‚                       â”‚
        â”‚  â€¢ Better accuracy   â”‚  â”‚  â€¢ Faster            â”‚
        â”‚  â€¢ Deeper reasoning  â”‚  â”‚  â€¢ Cost effective    â”‚
        â”‚  â€¢ Critical content  â”‚  â”‚  â€¢ General features  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                      â”‚
                    â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â”‚   AI Response        â”‚          â”‚
        â”‚   (Study Guide +     â”‚          â”‚
        â”‚    5 Questions)      â”‚          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                    â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              Client (Flutter App)              â”‚
        â”‚                                                â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚  Cevher Quality Pipeline (Enhanced)  â”‚    â”‚
        â”‚  â”‚                                       â”‚    â”‚
        â”‚  â”‚  1. QuizQualityGuard.apply()        â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Validation Gates (8)          â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Quality Scoring (0-100)       â”‚    â”‚
        â”‚  â”‚     â””â”€ Threshold Check (â‰¥70)         â”‚    â”‚
        â”‚  â”‚                                       â”‚    â”‚
        â”‚  â”‚  2. CevherQualityLogger              â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Success Logging               â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Failure Tracking              â”‚    â”‚
        â”‚  â”‚     â””â”€ User Statistics               â”‚    â”‚
        â”‚  â”‚                                       â”‚    â”‚
        â”‚  â”‚  3. Retry Strategy (3 attempts)      â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Attempt 1: Default temp       â”‚    â”‚
        â”‚  â”‚     â”œâ”€ Attempt 2: temp = 0.35        â”‚    â”‚
        â”‚  â”‚     â””â”€ Attempt 3: temp = 0.25        â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ (if passed)
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            User Interface                    â”‚
        â”‚                                              â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚  Study Guide                       â”‚    â”‚
        â”‚  â”‚  â€¢ Concepts                        â”‚    â”‚
        â”‚  â”‚  â€¢ Examples                        â”‚    â”‚
        â”‚  â”‚  â€¢ Tips                            â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â”‚                                             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚  Quiz (5 Questions)                â”‚    â”‚
        â”‚  â”‚  â€¢ Question text                   â”‚    â”‚
        â”‚  â”‚  â€¢ Options (A-E)                   â”‚    â”‚
        â”‚  â”‚  â€¢ Explanations                    â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quality Validation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Question Validation Pipeline                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: Raw Quiz Question
    â”‚
    â”œâ”€â–º Gate 1: Length Requirements
    â”‚   â”œâ”€ Question text â‰¥ 20 characters
    â”‚   â””â”€ Explanation â‰¥ 40 characters
    â”‚
    â”œâ”€â–º Gate 2: Answer Leak Detection
    â”‚   â””â”€ Check 9 patterns (cevap:, doÄŸru cevap, etc)
    â”‚
    â”œâ”€â–º Gate 3: Placeholder Detection
    â”‚   â””â”€ Check 7 patterns (lorem ipsum, placeholder, etc)
    â”‚
    â”œâ”€â–º Gate 4: Punctuation Validation
    â”‚   â””â”€ Proper ending punctuation (?, ., :)
    â”‚
    â”œâ”€â–º Gate 5: Unique Options Check
    â”‚   â””â”€ At least 4 distinct answer choices
    â”‚
    â”œâ”€â–º Gate 6: Valid Correct Answer
    â”‚   â”œâ”€ Not a placeholder
    â”‚   â””â”€ Adequate length (â‰¥3 chars)
    â”‚
    â”œâ”€â–º Gate 7: Factual Consistency
    â”‚   â””â”€ Numerical/logical coherence
    â”‚
    â”œâ”€â–º Gate 8: Quality Score Threshold
    â”‚   â”œâ”€ Content Quality: 40 points
    â”‚   â”œâ”€ Options Quality: 30 points
    â”‚   â”œâ”€ Pattern Detection: 20 points
    â”‚   â”œâ”€ Option Diversity: 10 points
    â”‚   â””â”€ Total Score â‰¥ 70/100
    â”‚
    â”œâ”€â–º PASS â”€â”€â–º Question Accepted
    â”‚              â”œâ”€â–º Add to final quiz
    â”‚              â””â”€â–º Log quality metrics
    â”‚
    â””â”€â–º FAIL â”€â”€â–º Question Rejected
                  â”œâ”€â–º Log specific issues
                  â”œâ”€â–º Trigger retry (up to 3x)
                  â””â”€â–º Log validation failure (if all fail)
```

## Data Flow and Storage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Firestore Collections                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cevher_quality_logs (System-wide tracking)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {                                                       â”‚ â”‚
â”‚  â”‚   userId: "user123",                                   â”‚ â”‚
â”‚  â”‚   subject: "Matematik",                                â”‚ â”‚
â”‚  â”‚   topic: "TÃ¼rev",                                      â”‚ â”‚
â”‚  â”‚   difficulty: "normal",                                â”‚ â”‚
â”‚  â”‚   modelVersion: "gemini-2.5-flash",                    â”‚ â”‚
â”‚  â”‚   qualityMetrics: {                                    â”‚ â”‚
â”‚  â”‚     questionsGenerated: 5,                             â”‚ â”‚
â”‚  â”‚     questionsAccepted: 5,                              â”‚ â”‚
â”‚  â”‚     averageQualityScore: "82.3"                        â”‚ â”‚
â”‚  â”‚   },                                                    â”‚ â”‚
â”‚  â”‚   timestamp: "2025-11-08T..."                          â”‚ â”‚
â”‚  â”‚ }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Access: Admin read only                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  users/{uid}/cevher_stats/quality_summary                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {                                                       â”‚ â”‚
â”‚  â”‚   totalWorkshops: 15,                                  â”‚ â”‚
â”‚  â”‚   totalQuestionsGenerated: 75,                         â”‚ â”‚
â”‚  â”‚   avgQualityScore: "81.5",                             â”‚ â”‚
â”‚  â”‚   lastWorkshopDate: "2025-11-08T..."                   â”‚ â”‚
â”‚  â”‚ }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Access: User read, Server write                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cevher_validation_failures (Failure analysis)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ {                                                       â”‚ â”‚
â”‚  â”‚   userId: "user456",                                   â”‚ â”‚
â”‚  â”‚   subject: "Fizik",                                    â”‚ â”‚
â”‚  â”‚   topic: "Hareket",                                    â”‚ â”‚
â”‚  â”‚   attemptNumber: 3,                                    â”‚ â”‚
â”‚  â”‚   issues: [                                            â”‚ â”‚
â”‚  â”‚     "Ã‡ok kÄ±sa soru elendi",                           â”‚ â”‚
â”‚  â”‚     "Yetersiz aÃ§Ä±klama"                               â”‚ â”‚
â”‚  â”‚   ],                                                    â”‚ â”‚
â”‚  â”‚   timestamp: "2025-11-08T..."                          â”‚ â”‚
â”‚  â”‚ }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Access: Admin read only                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Monitoring and Alerts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Monitoring Dashboard                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Real-Time Metrics:
â”œâ”€â–º Workshop Generation Count (daily/weekly/monthly)
â”œâ”€â–º Average Quality Score Trend
â”œâ”€â–º Question Rejection Rate
â”œâ”€â–º Validation Failure Patterns
â”‚   â”œâ”€ By topic/subject
â”‚   â”œâ”€ By validation gate
â”‚   â””â”€ By time period
â”œâ”€â–º Model Performance Comparison
â”œâ”€â–º Generation Latency (p50, p95, p99)
â””â”€â–º User Satisfaction Indicators

Alert Thresholds:
â”œâ”€â–º Quality Score < 70: âš ï¸  Warning
â”œâ”€â–º Failure Rate > 30%: ğŸš¨ Alert
â”œâ”€â–º Generation Time > 50s: âš ï¸  Warning
â”œâ”€â–º Error Rate > 5%: ğŸš¨ Alert
â””â”€â–º Zero successful generations (1 hour): ğŸš¨ Critical
```

## Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Security Layers                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Authentication
â”œâ”€â–º Firebase Auth (required)
â””â”€â–º Premium subscription check

Layer 2: Rate Limiting
â”œâ”€â–º 5 requests/min per user
â”œâ”€â–º 20 requests/min per IP
â”œâ”€â–º 10 requests/min per premium user (additional)
â””â”€â–º 100 requests/hour per premium user (additional)

Layer 3: Quota Management
â”œâ”€â–º Monthly star quota (1500 stars/month)
â”œâ”€â–º 1 star per workshop generation
â””â”€â–º Automatic monthly renewal

Layer 4: App Check
â”œâ”€â–º Device attestation
â””â”€â–º App integrity verification

Layer 5: Firestore Rules
â”œâ”€â–º Collection-level access control
â”œâ”€â–º Field-level validation
â”œâ”€â–º Admin-only sensitive data
â””â”€â–º User-scoped personal data
```

## Performance Characteristics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Performance Metrics                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Generation Time:
â”œâ”€â–º Target: < 45 seconds
â”œâ”€â–º Typical: 30-40 seconds
â””â”€â–º Timeout: 45 seconds

Validation Overhead:
â”œâ”€â–º QuizQualityGuard: ~200ms for 5 questions
â”œâ”€â–º Quality Logging: ~100ms (non-blocking)
â””â”€â–º Total Overhead: < 5% of generation time

Model Comparison:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Metric      â”‚  2.0 Flash Lite  â”‚   2.5 Flash      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Speed           â”‚ 20-30s           â”‚ 30-40s           â”‚
â”‚ Accuracy        â”‚ Good             â”‚ Excellent        â”‚
â”‚ Context         â”‚ 8K tokens        â”‚ 32K tokens       â”‚
â”‚ Reasoning       â”‚ Standard         â”‚ Advanced         â”‚
â”‚ Cost/Request    â”‚ Lower            â”‚ Moderate         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Retry Strategy:
â”œâ”€â–º Attempt 1: Default temperature
â”œâ”€â–º Attempt 2: Temperature 0.35 (more deterministic)
â””â”€â–º Attempt 3: Temperature 0.25 (most conservative)
    â””â”€â–º Success Rate: 95%+ after 3 attempts
```

---

**Diagram Version**: 1.0
**Last Updated**: 2025-11-08
**Architecture Status**: Implemented and Documented
